<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" th:href="@{/css/common.css}">
<link rel="stylesheet" th:href="@{/css/home.css}">
<link rel="stylesheet" th:href="@{/css/header_nav_footer.css}">
<link rel="stylesheet" th:href="@{/css/board.css}">
<!-- defer란 HTML을 먼저 만들고 JavaScript 실행하라는 의미임 -->

<script type="text/javascript" th:src="@{/js/member.js}" defer></script>
</head>
<body>
	<header th:replace="~{/include/header_nav_footer.html::header}"></header>
	<nav th:replace="~{/include/header_nav_footer.html::nav}"></nav>
	
	<section>
		<div id="section_wrap">
			<div class="word"><h2>게시글 목록 보기</h2></div>
			<div class="content">
					<table width="500" border="1">
						<tbody>
							<tr height="50">
								<td width="150" align="center">
									<!-- <a th:href="@{/board/write}" class="write-btn">글쓰기</a> -->
									<!-- 로그인이 된 상태에서만 게시글을 쓰도록 정의할 예정 -->
									<a href="#" class="write-btn" id="writeBtn"
										th:data-login="${session.loginmember != null}"
									>글쓰기</a>
								</td>
							</tr>
							<tr height="50">
								<td width="50" align="center">번호</td>
								<td width="320" align="center">제목</td>
								<td width="100" align="center">작성자</td>
								<td width="150" align="center">작성일자</td>
								<td width="80" align="center">조회수</td>
							</tr>
							<tr th:each="li,stat:${list}">
								<!-- <td th:text="${li.num}"></td> -->
								<!-- 전체 게시글의 번호를 최신순으로 계산하는 공식 -->
								<!-- 전체 게시글 개수 - ((현재 페이지번호 -1)*한 화면 게시글 개수)
												 - 현재 글 index번호 -->
								<td th:text="${ph.totalCnt-((ph.pageNum-1)*ph.pageSize)-stat.index}"></td>
								<td>
									<a th:href="@{/board/boardInfo(num=${li.num})}" th:text="${li.subject}"></a>
								</td>
								<td th:text="${li.writer}"></td>								
								<td th:text="${li.reg_date}"></td>								
								<td th:text="${li.readcount}"></td>								
							</tr>
						</tbody>
					</table>
					<!-- 페이징 화면 시작 -->
					<div class="paging">
						<!-- 이전 -->	
						<a th:if="${ph.prev}" th:href="@{/board/list(page=${ph.startPage-1},
						searchType=${searchType},searchKeyword=${searchKeyword})}">◀</a>
						
						<!-- 페이지 번호 출력 -->
						<!-- ph.startPage = 7, ph.endPage = 9 -->
						<!-- [7][8][9] -->
						<!-- #numbers.sequence는 순서대로 출력(for문과 동일) -->
						<!-- #numbers.sequence(7,9) => [7,8,9] -->
						<!-- i= 7,8,9.. -->
						<span th:each="i : ${#numbers.sequence(ph.startPage,ph.endPage)}">
							<a th:href="@{/board/list(page=${i},
							searchType=${searchType},searchKeyword=${searchKeyword})}"
								th:text = "${i}"
								th:classappend="${i == ph.pageNum ? 'active':''}" 
							>
							<!--th:classappend="${i == ph.pageNum ? 'active':''}"  
							ph.pageNum(선택한 페이지가 i와 같으면 active 클래스를 줘라는 뜻
							-->
							</a>
						
						</span>						
						<!-- 다음 -->	
						<a th:if="${ph.next}" th:href="@{/board/list(page=${ph.endPage+1},
						searchType=${searchType},searchKeyword=${searchKeyword})}">▶</a>
					</div>			
					<!-- 페이징 화면 종료 -->
							
					<!-- search 부분 -->
					<div id="search_wrap">
						<form th:action="@{/board/list}" method="GET">
							
							<select name="searchType">
								<option value="subject">제목</option>
								<option value="content">내용</option>
							</select>
							<input type="text" name="searchKeyword" placeholder="검색어를 입력하세요">
							<input type="submit" value="검색" name="searchBtn">
							<input type="button" value="전체보기" name="searchBtn"
							th:onclick="|location.href='@{/board/list}'|">						
							
						</form>			
					</div>
			</div>
		</div>
	</section>
	
	<footer th:replace="~{/include/header_nav_footer.html::footer}"></footer>	
</body>
</html>