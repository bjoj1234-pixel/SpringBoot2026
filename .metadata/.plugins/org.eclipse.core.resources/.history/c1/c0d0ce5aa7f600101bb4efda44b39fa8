package com.green;

import java.sql.Time;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Timer;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class MovieController {
	
	@GetMapping("/movie/reserve")
	public String reserveInput() {
		System.out.println("reserveInput()");
		return "reserve";
	}

	@GetMapping("/movie/reserveConfirm")
	public ModelAndView reserveResult(
			@RequestParam("title") String title,
			@RequestParam("date") Date date,
			@RequestParam("time") Timer time,
			@RequestParam("person") String person,
			@RequestParam("name") String name		
			) {
 			ModelAndView model = new ModelAndView();
 			
	        SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
	        SimpleDateFormat format2 = new SimpleDateFormat("HH:mm");
	        String str1 = format1.format(date);
	        String str2 = format2.format(time);
 			
 			model.addObject("title", title);
 			model.addObject("date", str1);
 			model.addObject("time", str2);
 			model.addObject("person", person);
 			model.addObject("name", name);
 			
 			model.setViewName("reserveConfirm");
 			
 			return model;
	}
	
}
